/**
 * angular-recaptcha build:2016-02-17 
 * https://github.com/vividcortex/angular-recaptcha 
 * Copyright (c) 2016 VividCortex 
**/

!function(a){"use strict";a.module("vcRecaptcha",[])}(angular),function(a){"use strict";var b=a.module("vcRecaptcha");b.provider("vcReCaptcha",[function(){var a,b,c;this.setSiteKey=function(b){a=b},this.setSize=function(a){c=a},this.setTheme=function(a){b=a},this.$get=["$document",function(d){var e=d[0].createElement("script"),f="https://www.google.com/recaptcha/api.js?onload=vcRecaptchaApiLoaded&render=explicit";return e.type="application/javascript",e.src=f,d[0].body.appendChild(e),{theme:b,siteKey:a,size:c}}]}])}(angular),function(a){"use strict";var b=a.module("vcRecaptcha");b.service("vcRecaptchaService",["$window","$q",function(b,c){function d(){return f?c.when(f):h}function e(){if(!f)throw new Error("reCaptcha has not been loaded yet.")}var f,g=c.defer(),h=g.promise;b.vcRecaptchaApiLoadedCallback=b.vcRecaptchaApiLoadedCallback||[];var i=function(){f=b.grecaptcha,g.resolve(f)};return b.vcRecaptchaApiLoadedCallback.push(i),b.vcRecaptchaApiLoaded=function(){b.vcRecaptchaApiLoadedCallback.forEach(function(a){a()})},a.isDefined(b.grecaptcha)&&i(),{create:function(a,b,c,e){return e.callback=c,e.sitekey=b,d().then(function(b){return b.render(a,e)})},reload:function(a){e(),f.reset(a)},getResponse:function(a){return e(),f.getResponse(a)}}}])}(angular),function(a){"use strict";function b(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var c=a.module("vcRecaptcha");c.directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService","vcReCaptcha",function(a,c,d,e){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=",stoken:"=?",theme:"=?",size:"=?",type:"=?",tabindex:"=?",required:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(f,g,h,i){function j(){i&&i.$setValidity("recaptcha",null),m()}function k(){f.response="",l(),f.onExpire({widgetId:f.widgetId})}function l(){i&&i.$setValidity("recaptcha",f.required===!1?null:Boolean(f.response))}function m(){angular.element(a[0].querySelectorAll(".pls-container")).parent().remove()}f.widgetId=null,i&&angular.isDefined(h.required)&&f.$watch("required",l);var n=f.$watch("key",function(a){if(a=a||e.siteKey){40!==a.length&&b();var i=function(a){c(function(){f.response=a,l(),f.onSuccess({response:a,widgetId:f.widgetId})})};d.create(g[0],a,i,{stoken:f.stoken||h.stoken||null,theme:f.theme||h.theme||e.theme||null,type:f.type||h.type||null,tabindex:f.tabindex||h.tabindex||null,size:f.size||h.size||e.size||null,"expired-callback":k}).then(function(a){l(),f.widgetId=a,f.onCreate({widgetId:a}),f.$on("$destroy",j)}),n()}})}}}])}(angular);